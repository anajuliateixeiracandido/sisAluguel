<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Criar Contrato</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script>
        // Função para exibir detalhes do plano selecionado
        function mostrarDetalhesPlano() {
            const planoSelecionado = document.getElementById('plano').value;
            let detalhes = '';

            switch(planoSelecionado) {
                case 'bronze':
                    detalhes = `
                        <h5>Plano Bronze</h5>
                        <p><strong>Descrição:</strong> Ideal para quem precisa de um carro básico e econômico para o dia a dia.</p>
                        <p><strong>Valor Mensal:</strong> R$ 799,00</p>
                        <p><strong>Kilometragem:</strong> 1.000 km inclusos/mês</p>
                        <p><strong>Cobertura de Seguro:</strong> Básica, com franquia de R$ 2.500,00</p>
                        <p><strong>Manutenção:</strong> Inclusa (troca de óleo e revisão básica a cada 6 meses)</p>
                        <p><strong>Assistência na Estrada:</strong> Disponível 24h, com limitações</p>
                        <p><strong>Extras:</strong></p>
                        <ul>
                            <li>1 condutor adicional gratuito</li>
                            <li>Não inclui GPS ou sistema de entretenimento</li>
                        </ul>`;
                    break;
                case 'prata':
                    detalhes = `
                        <h5>Plano Prata</h5>
                        <p><strong>Descrição:</strong> Perfeito para quem busca um carro mais confortável e com mais recursos.</p>
                        <p><strong>Valor Mensal:</strong> R$ 1.299,00</p>
                        <p><strong>Kilometragem:</strong> 2.000 km inclusos/mês</p>
                        <p><strong>Cobertura de Seguro:</strong> Intermediária, com franquia de R$ 1.500,00</p>
                        <p><strong>Manutenção:</strong> Inclusa (troca de óleo e revisão completa a cada 6 meses)</p>
                        <p><strong>Assistência na Estrada:</strong> Disponível 24h, com reboque e carro reserva</p>
                        <p><strong>Extras:</strong></p>
                        <ul>
                            <li>2 condutores adicionais gratuitos</li>
                            <li>Sistema de GPS incluído</li>
                            <li>Opção de upgrade para carro com tecnologia híbrida</li>
                        </ul>`;
                    break;
                case 'ouro':
                    detalhes = `
                        <h5>Plano Ouro</h5>
                        <p><strong>Descrição:</strong> Ideal para clientes que desejam um veículo premium com todas as comodidades.</p>
                        <p><strong>Valor Mensal:</strong> R$ 2.199,00</p>
                        <p><strong>Kilometragem:</strong> 3.500 km inclusos/mês</p>
                        <p><strong>Cobertura de Seguro:</strong> Completa, com franquia de R$ 1.000,00</p>
                        <p><strong>Manutenção:</strong> Inclusa (troca de óleo e revisão completa a cada 6 meses, com carro reserva)</p>
                        <p><strong>Assistência na Estrada:</strong> Disponível 24h, com reboque, carro reserva e motorista</p>
                        <p><strong>Extras:</strong></p>
                        <ul>
                            <li>Até 3 condutores adicionais gratuitos</li>
                            <li>Sistema de entretenimento premium e GPS incluído</li>
                            <li>Limpeza do veículo semanalmente</li>
                            <li>Opção de troca de veículo mensalmente</li>
                        </ul>`;
                    break;
                default:
                    detalhes = '<p>Selecione um plano para ver os detalhes.</p>';
            }

            document.getElementById('detalhes-plano').innerHTML = detalhes;
        }

        // Função para validar número de parcelas baseado no método de pagamento
        function validarParcelas() {
            const metodoPagamento = document.getElementById('metodoPagamento').value;
            const numParcelas = document.getElementById('numParcelas');

            if (metodoPagamento === 'cartao_debito' || metodoPagamento === 'boleto') {
                numParcelas.value = 1; // Força a seleção para 1 parcela
                numParcelas.setAttribute('disabled', 'disabled'); // Desabilita o seletor de parcelas
            } else {
                numParcelas.removeAttribute('disabled'); // Habilita o seletor de parcelas
            }
        }
    </script>
</head>
<body>
    <div class="container mt-5">
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h1 class="h3 mb-0">Criar Contrato</h1>
            </div>
            <div class="card-body">
                <p><strong>ID:</strong> <span th:text="${aluguel.idAluguel}"></span></p>
                <p><strong>Usuário:</strong> <span th:text="${aluguel.usuario.nome}"></span></p>
                <p><strong>Veículo:</strong> <span th:text="${aluguel.veiculo.modelo}"></span></p>

                <div class="form-group">
                    <label for="metodoPagamento">Método de Pagamento:</label>
                    <select id="metodoPagamento" class="form-control" onchange="validarParcelas()">
                        <option value="">Selecione um método</option>
                        <option value="cartao_credito">Cartão de Crédito</option>
                        <option value="cartao_debito">Cartão de Débito</option>
                        <option value="boleto">Boleto</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="numParcelas">Número de Parcelas:</label>
                    <select id="numParcelas" class="form-control">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="plano">Escolha o Plano:</label>
                    <select id="plano" class="form-control" onchange="mostrarDetalhesPlano()">
                        <option value="">Selecione um plano</option>
                        <option value="bronze">Plano Bronze</option>
                        <option value="prata">Plano Prata</option>
                        <option value="ouro">Plano Ouro</option>
                    </select>
                </div>

                <div id="detalhes-plano" class="mt-4">
                    <p>Selecione um plano para ver os detalhes.</p>
                </div>

                <div class="form-group">
                    <label for="dataInicio">Data de Início:</label>
                    <input type="date" id="dataInicio" class="form-control" required>
                </div>

                <div class="form-group">
                    <label for="duracaoContrato">Duração do Contrato (meses):</label>
                    <select id="duracaoContrato" class="form-control">
                        <option value="1">1 mês</option>
                        <option value="2">2 meses</option>
                        <option value="3">3 meses</option>
                        <option value="4">4 meses</option>
                        <option value="5">5 meses</option>
                        <option value="6">6 meses</option>
                        <option value="12">12 meses</option>
                    </select>
                </div>

                <a href="/aluguel/" class="btn btn-secondary mt-3">Voltar à lista</a>
                <button class="btn btn-primary mt-3" onclick="alert('Contrato criado com sucesso!')">Criar Contrato</button>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
